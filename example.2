
module,rng

pool,rng-state,1,uint32_t
pool,bogus,17,uint32_t
bundle,state,rng-state,bogus


fn,rng-stateless,x
lit,48271UL,A
lit,2147483647UL,B
mul,Axx 
mod,xBx
inc,x
end

fn,rng,a type,uint32_t,B
rng-state,B mov,BA rng-stateless,A mov,Aa mov,AB
rng-state-store,B
end

fn,f,a type,float,a
rng,A mov,Aa
end

module,star

pool,x,65536,float
pool,y,65536,float
band,star,x,y
pack,star

fn,create,i type,float,A
rng@f,A x-storei,Ai rng@f,A y-storei,Ai
c printf("CR %llu\n", *i);
end

fn,populate
each,x,NI create,I
end

fn,dump
lit,0,A
x-size,B
times,BI dumpone,I
bye
end


fn,dumpone,i type,float,X type,float,Y
x-i,Xi y-i,Yi
c printf("%lli %0.2f %0.2f\n", *i, *X, *Y);
end

fn,bye
c exit(0);


pro #include <stdio.h>
pro #include <stdlib.h>
anx int main() { udp_setup(); star_populate(); star_dump(); for(;;) udp_handler(); }

